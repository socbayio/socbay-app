<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>SocBay Upload</title>
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" crossorigin="anonymous">
    <link href="/bootstrapfileinput/assets/css/fileinput.css" media="all" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" crossorigin="anonymous">
    <link href="/bootstrapfileinput/assets/themes/explorer-fas/theme.css" media="all" rel="stylesheet" type="text/css"/>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    
    <!-- uploadpageassets -->
    <script src="/bootstrapfileinput/assets/js/plugins/piexif.js" type="text/javascript"></script>
    <script src="/bootstrapfileinput/assets/js/plugins/sortable.js" type="text/javascript"></script>
    <script src="/bootstrapfileinput/assets/js/fileinput.js" type="text/javascript"></script>
    <script src="/bootstrapfileinput/assets/js/locales/fr.js" type="text/javascript"></script>
    <script src="/bootstrapfileinput/assets/js/locales/es.js" type="text/javascript"></script>
    <script src="/bootstrapfileinput/assets/themes/fas/theme.js" type="text/javascript"></script>
    <script src="/bootstrapfileinput/assets/themes/explorer-fas/theme.js" type="text/javascript"></script>

    <link href="/bootstrapfileinput/assets/themes/explorer-fas/theme.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/bootstrapfileinput/assets/css/fileinput.css" media="all" rel="stylesheet" type="text/css"/>

</head>
<body>
<div class="container my-4">
    <form enctype="multipart/form-data">
        <div class="file-loading">
            <input id="file-4" type="file" class="file" multiple data-preview-file-type="any" data-upload-url="/upload/store" data-theme="fas">
        </div>
    </form>
    <br>
    <div id="CIDback">

    </div>
</div>
</body>

<script>
    $("#file-4").fileinput({
        theme: 'fas',
        uploadExtraData: {kvId: '10'},
        maxFileSize: 100*1024
    }).on('fileuploaded', function(event,databack) {
        var CIDback = document.getElementById('CIDback');
        var CIDcontent = document.createElement('h4');
        var a = document.createElement('a');
        a.href = "https://ipfs.io/ipfs/" + databack.response.CID;
        a.textContent = "Link";
        a.target = "_blank";
        CIDcontent.appendChild(a);
        var recommend = document.createElement('div');
        recommend.innerHTML = "If you want to keep track of your uploading, sign up with only some steps!";
		CIDcontent.appendChild(recommend);
        CIDback.appendChild(CIDcontent);		
    }); 

    $(".btn-warning").on('click', function () {
        var $el = $("#file-4");
        if ($el.attr('disabled')) {
            $el.fileinput('enable');
        } else {
            $el.fileinput('disable');
        }
    });
    $(".btn-info").on('click', function () {
        $("#file-4").fileinput('refresh', {previewClass: 'bg-info'});
    });



</script>


</html>