<!DOCTYPE html>
<html lang="en">
    <head>
        <%- include("head"); -%>
        <title>Socbay - <%=t('title.universalupload')%></title>
        <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
            crossorigin="anonymous"
        />
        <link
            href="/bootstrapfileinput/assets/css/fileinput.css"
            media="all"
            rel="stylesheet"
            type="text/css"
        />
        <link
            rel="stylesheet"
            href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
            crossorigin="anonymous"
        />
        <link
            href="/bootstrapfileinput/assets/themes/explorer-fas/theme.css"
            media="all"
            rel="stylesheet"
            type="text/css"
        />
        <script
            src="https://code.jquery.com/jquery-3.3.1.min.js"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.bundle.min.js"
            crossorigin="anonymous"
        ></script>

        <!-- uploadpageassets -->
        <script
            src="/bootstrapfileinput/assets/js/plugins/piexif.js"
            type="text/javascript"
        ></script>
        <script
            src="/bootstrapfileinput/assets/js/plugins/sortable.js"
            type="text/javascript"
        ></script>
        <script
            src="/bootstrapfileinput/assets/js/fileinput.js"
            type="text/javascript"
        ></script>
        <script
            src="/bootstrapfileinput/assets/js/locales/fr.js"
            type="text/javascript"
        ></script>
        <script
            src="/bootstrapfileinput/assets/js/locales/es.js"
            type="text/javascript"
        ></script>
        <script
            src="/bootstrapfileinput/assets/themes/fas/theme.js"
            type="text/javascript"
        ></script>
        <script
            src="/bootstrapfileinput/assets/themes/explorer-fas/theme.js"
            type="text/javascript"
        ></script>

        <link
            href="/bootstrapfileinput/assets/themes/explorer-fas/theme.css"
            media="all"
            rel="stylesheet"
            type="text/css"
        />
        <link
            href="/bootstrapfileinput/assets/css/fileinput.css"
            media="all"
            rel="stylesheet"
            type="text/css"
        />
    </head>

    <body>
        <%- include("header"); -%> <%- include("leftSideBar"); -%>
        <!-- Body Start -->
        <div class="wrapper">
            <div class="sa4d25">
                <div class="container-fluid">
                    <div class="row justify-content-md-center">
                        <div class="col-lg-8 col-md-10">
                            <div class="section3125 stream_tabs">
                                <div class="tab-content" id="myTabContent">
                                    <div
                                        class="tab-pane fade show active"
                                        id="add-straming"
                                        role="tabpanel"
                                    >
                                        <div class="add_stream_content">
                                            <h4 class="strm_title">
                                                Upload Anything
                                            </h4>
                                            <form enctype="multipart/form-data">
                                                <div class="group-form">
                                                    <input
                                                        id="filesupload"
                                                        type="file"
                                                        class="file"
                                                        multiple
                                                        data-preview-file-type="any"
                                                        data-theme="fas"
                                                    />
                                                </div>
                                            </form>
                                            <h6 id="CIDback"></h6>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Body End -->
        <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
            crossorigin="anonymous"
        ></script>
        <script
            src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
            crossorigin="anonymous"
        ></script>
        <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>

        <script src="/js/vertical-responsive-menu.min.js"></script>
        <script src="/owlcarousel/owl.carousel.js"></script>
        <script src="/js/custom.js"></script>
        <script src="/js/night-mode.js"></script>

        <script>
            	$("#filesupload").fileinput({
            		uploadUrl: "/upload/store",
            		theme: 'fas',
            		uploadAsync: true,
            		maxFileSize: 200 * 1024,

            		browseClass: "btn btn-primary btn-block",


            	}).on('fileuploaded', function (event, databack) {
            		var CIDback = document.getElementById('CIDback');
            		var CIDcontent = document.createElement('h6');
            		var a = document.createElement('a');
            		a.href = "https://ipfs.io/ipfs/" + databack.response.CID + "?filename=" + databack.response.name;
            		a.textContent = "Link";
            		a.target = "_blank";
            		CIDcontent.appendChild(a);
            		var recommend = document.createElement('div');
            		recommend.classList.add('text-break');
            <% if (!loggedIn) { %>
            			recommend.innerHTML = "CID: " + databack.response.CID + ". Sign in to keep track of your uploading.";
            <% } else { %>
            			recommend.innerHTML = "CID: " + databack.response.CID;
            <% } %>
            			CIDcontent.appendChild(recommend);
            		CIDback.appendChild(CIDcontent);
            	});
        </script>
    </body>
</html>
